<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor Right Panel App</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.crowdin.com/apps/dist/iframe.js" defer></script>
    <script src="app.js" defer></script>
</head>
<body>
    <!-- Main Container -->
    <div class="container" role="main">
        <h1>‚úèÔ∏è Editor Panel Demo</h1>
        
        <!-- Introduction Section -->
        <div class="tool-section">
            <h3>üöÄ Welcome to Editor Right Panel Template</h3>
            <p>This template demonstrates a Crowdin app with <strong>Editor Right Panel</strong> module integration.</p>
            
            <div class="context-info">
                <strong>üìå About Editor Right Panel:</strong><br>
                Editor panels appear in the translation editor sidebar. They have access to the current string, translation, and can interact with the editor via AP.editor API.
            </div>
            
            <h4>What's Included:</h4>
            <ul class="feature-list">
                <li><strong>Crowdin Editor API</strong> - Access to translation context (AP.editor)</li>
                <li><strong>String Manipulation</strong> - Insert, append, set translation</li>
                <li><strong>Context Access</strong> - Get source string and current translation</li>
                <li><strong>Event Listeners</strong> - React to editor events</li>
                <li><strong>TypeScript Backend</strong> - Optional API endpoints</li>
            </ul>

            <div class="info-box">
                <strong>üí° Key Features:</strong><br>
                1. Appears in translation editor sidebar<br>
                2. Access to current string and translation<br>
                3. Can modify translation in real-time<br>
                4. Most functionality is frontend-focused
            </div>
        </div>

        <!-- Current String Section -->
        <div class="tool-section" role="region" aria-labelledby="string-heading">
            <h3 id="string-heading">üìù Current String Context</h3>
            <p>Information about the currently selected string in the editor</p>
            <p style="font-size: 11px; color: #6c757d; margin-top: -5px;">
                <em>Automatically updates when you select a different string</em>
            </p>
            <div id="stringInfo" class="loading" role="status" aria-live="polite">Loading string information...</div>
            
            <div class="code-snippet">
                <strong>Auto-update Code (app.js):</strong><br>
                AP.events.on('string.change', function(data) {<br>
                &nbsp;&nbsp;// This fires when user selects a new string<br>
                &nbsp;&nbsp;AP.editor.getString(function(string) {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;updateUI(string);<br>
                &nbsp;&nbsp;});<br>
                });
            </div>
        </div>

        <!-- Translation Actions Section -->
        <div class="tool-section" role="region" aria-labelledby="actions-heading">
            <h3 id="actions-heading">‚ö° Translation Actions</h3>
            <p>Quick actions to modify the current translation</p>
            
            <div class="action-buttons" role="group" aria-label="Translation actions">
                <button class="action-button" 
                        onclick="insertSampleText()" 
                        aria-label="Set translation to sample text">
                    ‚ûï Set Sample
                </button>
                <button class="action-button" 
                        onclick="appendTimestamp()" 
                        aria-label="Append timestamp to translation">
                    üïê Add Timestamp
                </button>
                <button class="action-button" 
                        onclick="toUpperCase()" 
                        aria-label="Convert translation to uppercase">
                    üî§ UPPERCASE
                </button>
                <button class="action-button" 
                        onclick="clearTranslation()" 
                        aria-label="Clear current translation"
                        style="background: #dc3545;">
                    üóëÔ∏è Clear
                </button>
            </div>
            
            <div id="actionResult" role="status" aria-live="polite"></div>
            
            <div class="code-snippet">
                <strong>Editor API Methods:</strong><br>
                AP.editor.setTranslation(text)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Replace all<br>
                AP.editor.appendTranslation(text)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Append to end<br>
                AP.editor.getTopTranslation(callback)&nbsp;// Get current<br>
                AP.editor.clearTranslation()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Clear all
            </div>
        </div>

        <!-- API Reference Section -->
        <div class="tool-section" role="region" aria-labelledby="api-reference-heading">
            <h3 id="api-reference-heading">üìö Available Editor API Methods</h3>
            <table class="data-table" role="table" aria-label="Editor API methods reference">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>AP.editor.getString(callback)</code></td>
                        <td>Get current source string info</td>
                    </tr>
                    <tr>
                        <td><code>AP.editor.getTopTranslation(callback)</code></td>
                        <td>Get top translation for current string</td>
                    </tr>
                    <tr>
                        <td><code>AP.editor.getTranslations(callback)</code></td>
                        <td>Get all translations for current string</td>
                    </tr>
                    <tr>
                        <td><code>AP.editor.setTranslation(text)</code></td>
                        <td>Replace entire translation</td>
                    </tr>
                    <tr>
                        <td><code>AP.editor.appendTranslation(text)</code></td>
                        <td>Append to end of translation</td>
                    </tr>
                    <tr>
                        <td><code>AP.editor.clearTranslation()</code></td>
                        <td>Clear translation field</td>
                    </tr>
                </tbody>
            </table>
            
            <p style="margin-top: 15px; font-size: 12px;">
                üìñ <strong>Full API Documentation:</strong> 
                <a href="https://support.crowdin.com/developer/crowdin-apps-js" target="_blank">
                    Crowdin Apps JS API
                </a>
            </p>
        </div>

        <!-- Implementation Guide -->
        <div class="tool-section">
            <h3>üîß Implementation Guide</h3>
            
            <h4>Frontend (app.js):</h4>
            <div class="code-snippet">
                ‚Ä¢ Use <code>AP.editor</code> methods to interact with translations<br>
                ‚Ä¢ Use <code>AP.getContext()</code> to get editor context<br>
                ‚Ä¢ Most logic is frontend-focused (no backend needed for simple tools)<br>
                ‚Ä¢ Panel width is typically 300-400px
            </div>

            <h4>Backend (worker/app.ts) - Optional:</h4>
            <div class="code-snippet">
                ‚Ä¢ Add only if you need external API integration<br>
                ‚Ä¢ Use for fetching suggestions, dictionaries, etc.<br>
                ‚Ä¢ Keep backend minimal - most work is done in frontend
            </div>

            <h4>Next Steps:</h4>
            <ul class="feature-list">
                <li>Update app configuration in <code>worker/app.ts</code> (name, identifier)</li>
                <li>Customize the UI in <code>index.html</code> and <code>styles.css</code></li>
                <li>Add your logic in <code>app.js</code> using AP.editor API</li>
                <li>Test your app in Crowdin translation editor</li>
            </ul>

            <div class="info-box">
                <strong>üéØ Pro Tips:</strong><br>
                ‚Ä¢ Keep UI compact (panel width is limited)<br>
                ‚Ä¢ Focus on quick, actionable features<br>
                ‚Ä¢ Test with different string types and languages<br>
                ‚Ä¢ Handle cases when editor API is not available
            </div>
        </div>
    </div>
</body>
</html>
